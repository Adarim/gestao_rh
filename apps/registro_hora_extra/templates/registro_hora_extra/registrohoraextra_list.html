{% extends 'base.html' %}
{% block l2%}
<a  class="nav-link" href="{% url  'create-hora-extra' %}" >Adicionar Hora-EXTRA</a>
{%endblock%}
{% block l3%}
                    <a class="nav-link" href="{% url 'logout' %}">LogOut</a>
{% endblock %}
{% block title %}Lista do Banco de Horas{%endblock%}
{% block main %}
<div class="col-12 m-auto pt-1 pb-1"  >
    <a  href="{% url 'create-hora-extra'  %}" class="btn btn-success" style="Font-size: 12px;"> Adicionar Hora-Extra </a>
    <a title="Adiciona vários registros de Hora-Extra em um mesmo formulário" href=" " class="btn btn-warning" style="Font-size: 12px;"> Horas-Extras em Lote </a>
    &nbsp; &nbsp; &nbsp; &nbsp; Lista de Registros de Horas-Extras</div>
    <form action="?" method="GET">
   <div id="Pesquisa" class="d-block p-1 pb-2 pt-2 bg-primary text-white" ><span class="d-flex" >&nbsp;&nbsp;&nbsp; Pesquisa &nbsp;&nbsp;&nbsp;
    <input name='pmotivo'  style="width: 20%;" class="f-motivo" value="{{ request.GET.pmotivo }}"  type="text" placeholder="Digite o motivo ou parte dele...">&nbsp;&nbsp;<button type="submit" class="btn btn-warning p-1" style="font-size: 10px;">OK </button>&nbsp;&nbsp;
    <a class="btn btn-secondary p-1" style="font-size: 10px;" href="{% url 'list-hora-extra' %}">Limpar</a>&nbsp;&nbsp;
       <select class="form-select func" style="width: 20%;" name="funcionario" id="{{registro_re.id}}">&nbsp;&nbsp;
                                <option value=""  disabled selected>Selecione um Funcionário</option>
                                {% for st in funcionario_list %}
                                <option value="{{st}}">{{st}}</option>
                                {% endfor %}
                            </select>
   </span>
   </div></form>
    <div class="col-14 m-auto text-center" >
        <table class="table" >
          <thead class="thead-dark" style="background-color: #e3b762">
            <tr style="Font-size: 11px;">
               <th scope="col" style="width: 22%;">Status/Data</th>
               <th scope="col" style="width: 24%;" >Funcionário</th>
               <th scope="col" style="width: 30%;">Motivo </th>
               <th scope="col" style="width: 25px;">Qtde.</th>
               <th scope="col" style="width: 20%; ">Ações</th>
            </tr>
          </thead>
          <tbody>

{% for registro_re in page_obj %}

                <tr style="font-size: 12px;">
                <th scope="row">{% if registro_re.utilizada %} <span style="color: red;"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-alarm-fill" viewBox="0 0 16 16">
  <path d="M6 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1H9v1.07a7.001 7.001 0 0 1 3.274 12.474l.601.602a.5.5 0 0 1-.707.708l-.746-.746A6.97 6.97 0 0 1 8 16a6.97 6.97 0 0 1-3.422-.892l-.746.746a.5.5 0 0 1-.707-.708l.602-.602A7.001 7.001 0 0 1 7 2.07V1h-.5A.5.5 0 0 1 6 .5zm2.5 5a.5.5 0 0 0-1 0v3.362l-1.429 2.38a.5.5 0 1 0 .858.515l1.5-2.5A.5.5 0 0 0 8.5 9V5.5zM.86 5.387A2.5 2.5 0 1 1 4.387 1.86 8.035 8.035 0 0 0 .86 5.387zM11.613 1.86a2.5 2.5 0 1 1 3.527 3.527 8.035 8.035 0 0 0-3.527-3.527z"/>
</svg></span> {% else %} <span style="color: green;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-alarm" viewBox="0 0 16 16">
  <path d="M8.5 5.5a.5.5 0 0 0-1 0v3.362l-1.429 2.38a.5.5 0 1 0 .858.515l1.5-2.5A.5.5 0 0 0 8.5 9V5.5z"/>
  <path d="M6.5 0a.5.5 0 0 0 0 1H7v1.07a7.001 7.001 0 0 0-3.273 12.474l-.602.602a.5.5 0 0 0 .707.708l.746-.746A6.97 6.97 0 0 0 8 16a6.97 6.97 0 0 0 3.422-.892l.746.746a.5.5 0 0 0 .707-.708l-.601-.602A7.001 7.001 0 0 0 9 2.07V1h.5a.5.5 0 0 0 0-1h-3zm1.038 3.018a6.093 6.093 0 0 1 .924 0 6 6 0 1 1-.924 0zM0 3.5c0 .753.333 1.429.86 1.887A8.035 8.035 0 0 1 4.387 1.86 2.5 2.5 0 0 0 0 3.5zM13.5 1c-.753 0-1.429.333-1.887.86a8.035 8.035 0 0 1 3.527 3.527A2.5 2.5 0 0 0 13.5 1z"/>
</svg></span> {% endif %} &nbsp;
                    <span style="font-size: 9px;">{{ registro_re.post}}</span></th>
              <td style="Font-size: 11px; font-weight: bold; color: gray;">{{ registro_re.funcionario }}</td>
              <td style="Font-size: 11px;">{{ registro_re }}   </td>
              <td {% if registro_re.utilizada %} style="color: red; font-weight: bold;" {% else %} style="color: green; font-weight: bold;" {% endif %}>{{ registro_re.horas }}</td>
              <td><a title="Editar Hora-Extra" href="{% url  'edit-hora-extra'  registro_re.id%} " class="btn btn-info" style="Font-size: 10px;  text-align: center;"> <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
  <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
  <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
              </svg></a> {% if not registro_re.utilizada %}<button title="Marcar / Utilizar" onclick="utiliza( {{registro_re.id}}, '/horas-extras/marca/','Registro de Hora-Extra','')" class="btn btn-success" style="Font-size: 10px;  text-align: center;"> <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" fill="currentColor" class="bi bi-calendar2-check" viewBox="0 0 16 16">
  <path d="M10.854 8.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708 0z"/>
  <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM2 2a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H2z"/>
  <path d="M2.5 4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H3a.5.5 0 0 1-.5-.5V4z"/>
              </svg></button> {% else %}<button title="Desmarcar Hora-Extra" onclick="utiliza( {{registro_re.id}}, '/horas-extras/desmarca/','Registro de Hora-Extra','')" class="btn btn-secondary" style="Font-size: 10px;"><svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" fill="currentColor" class="bi bi-calendar-x" viewBox="0 0 16 16">
  <path d="M6.146 7.146a.5.5 0 0 1 .708 0L8 8.293l1.146-1.147a.5.5 0 1 1 .708.708L8.707 9l1.147 1.146a.5.5 0 0 1-.708.708L8 9.707l-1.146 1.147a.5.5 0 0 1-.708-.708L7.293 9 6.146 7.854a.5.5 0 0 1 0-.708z"/>
  <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
</svg> </button>{% endif %} <button title="Excluir Hora-Extra" onclick="apaga( {{registro_re.id}}, '/horas-extras/delete/','Registro de Hora-Extra','')" class="btn btn-danger btnDel" style="Font-size: 10px; "> <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" fill="currentColor" class="bi bi-trash-fill" viewBox="0 0 16 16">
  <path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"/>
              </svg> </button>
 </td>
            </tr>
 {% empty %}
<span  style="color: red; font-size: 10px; fon-style: bold;"> Não Existem Horas Extras Registradas para esta Empresa</span><br>

{% endfor %}
           </tbody>
        </table>
        <div style="position: sticky;" class="pagination d-block p-2 bg-dark text-white"  >
    <span class="step-links">
        {% if page_obj.has_previous %}
         {% if request.GET.pmotivo %}
            <a href="?page=1&pmotivo={{request.GET.pmotivo}}">&laquo; Inicio</a> |
            <a href="?page={{ page_obj.previous_page_number }}&pmotivo={{request.GET.pmotivo}}">Anterior</a> |
         {% else %}
            <a href="?page=1">&laquo; Inicio</a> |
            <a href="?page={{ page_obj.previous_page_number }}">Anterior</a> |
         {% endif %}
        {% endif %}

        <span class="current">
            Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }} |
        </span>

        {% if page_obj.has_next %}
          {% if request.GET.pmotivo %}
             <a href="?page={{ page_obj.next_page_number }}&pmotivo={{request.GET.pmotivo}}">Próxima</a> |
            <a href="?page={{ page_obj.paginator.num_pages }}&pmotivo={{request.GET.pmotivo}}">Fim &raquo;</a>
          {% else %}
            <a href="?page={{ page_obj.next_page_number }}">Próxima</a> |
            <a href="?page={{ page_obj.paginator.num_pages }}">Fim &raquo;</a>
          {% endif %}
        {% endif %}
    </span>
</div>
</div>
<hr>
























{% endblock %}
